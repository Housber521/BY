<template>
	<view>
		<view class="editor-wrap" id="by_w">
			<view class="header">
				<view class="header-down"
					style="background-image: url('https://bfs.biyao.com/group1/M00/B4/3B/rBACW1yjqW6Ae7RhAAAd5r4TJxY228.jpg')">
					<view class="header-price">50å…ƒ</view>
					<view class="header-right">
						<view class="top-p">
							<text></text>
							<text>00:00:00
								<text>7</text>
							</text>
							åè¿‡æœŸ
						</view>
						<view class="bottom-p">ä¸‹è½½appé¢†å–æ–°ç”¨æˆ·é™é‡ä¸“å±ç‰¹æƒ</view>
					</view>
				</view>
			</view>
			<!-- é¡¶éƒ¨ å•†å“ã€è¯„ä»·ã€è¯¦æƒ… -->
			<!-- <view class="editor-wrap" id="by_w">
			<view class="tabs" style="opacity: 1; transform: scaleY(1);">
				<view class="commodity active">
					<view class="sprites-icon dingwei tabs1">å•†å“</view>
				</view>
			</view>
		</view> -->

			<!--  -->
			<view class="gl-wrap" style="padding-bottom: 40rpx;">
				<!-- 1. å•†å“éƒ¨ä»½ -->
				<view class="commodity">
					<!-- è½®æ’­ -->
					<view class="gl-slider">
						<swiper indicator-dots indicator-color='#fff' indicator-active-color="red" circular
							class="gl-img-slider">

							<swiper-item v-for="(item,index) in detailData.imgList" key="index">
								<image :src="item.largeImg" mode=""></image>
							</swiper-item>
						</swiper>
					</view>

					<!-- å•†å“åŸºæœ¬ä¿¡æ¯ -->
					<view class="gl-base-detial-wrap section">
						<view class="price-collec-info">
							<view class="price base-price">
								ï¿¥<text>{{detailData.suData?detailData.suData.price:''}}</text>
							</view>
							<view class="al-pay-hb">
								<text class="sprites-icon"></text>
								æ”¯æŒèŠ±å‘—åˆ†æœŸä»˜æ¬¾
							</view>
							<view class="collect">
								<!-- <text class="sprites-icon"></text> -->
								<view class="collectText">æ”¶è—</view>
							</view>
						</view>

						<!--  -->
						<view class="makers-info">
							<view class="markers-text">
								<!-- <view class="sprites-icon img"></view> -->
								{{detailData.supplierBackground?detailData.supplierBackground:''}}
							</view>
							<view class="generate-time">
								ç”Ÿäº§å‘¨æœŸ:
								<text class="duration-days">{{detailData.suData?detailData.suData.duration:''}}</text>
								å¤©
								<!-- <text class="iconfont">î™¯</text> -->
							</view>
						</view>

						<!--  -->
						<view class="product-h1-title">{{detailData?detailData.longProductName:''}}</view>
						<view class="product-h3-desc">{{detailData?detailData.productSale:''}}</view>
					</view>

					<!-- æœåŠ¡åè®® -->
					<view class="gl-service-content gl-service-wrap section">
						<view class="gl-service-list ul">
							<view v-for="(item,index) in ServiceAgreement" key="index" class="li">
								<text space="nbsp">ğŸ·&nbsp;</text>
								{{item.policyName}}
							</view>
						</view>
					</view>

					<!-- ç«™å†…å‚å›¢ -->
					<view
						class="tg-inner-group swiper-container swiper-container-vertical swiper-container-android section">
						<!-- <view class="swiper-wrapper"> -->
						<swiper class="swiper-wrapper" :autoplay="true" :interval="3000" vertical='false' circular
							display-multiple-items=2 disable-touch="false">
							<swiper-item v-for="(item,index) in groupTeam">
								<view class="group-list swiper-slide swiper-slide-next">
									<view class="group-info">
										<view class="flex-center">
											<image class="leader-img" :src="item.avatarUrl" mode=""></image>
											<view class="div">
												<view class="leader-name">{{item.nickname}}</view>
											</view>
										</view>
										<view class="" style="text-align:right;">
											<view class="group-residue">
												è¿˜å·®
												<text class="rsd-num">1</text>
												äººæ‹¼æˆ
												<br />
												<text class="group-residue-time">å‰©ä½™
													<text class="h_des">00:00:00</text>
												</text>
											</view>
										</view>
									</view>
									<view class="join-group-btn in-group-buy eventLink">
										å‚å›¢
									</view>
								</view>
							</swiper-item>
						</swiper>


						<!-- </view> -->
					</view>

					<!-- æ‹¼å›¢ç©æ³• -->
					<view class="gl-rule-wrap">
						<view class="section">
							<view class="gl-rule-title">
								<view class="gl-rule-title-l">æ‹¼å›¢ç©æ³•</view>
								<view class="gl-rule-title-r">
									<text class="gz">è¯¦ç»†è§„åˆ™</text>
									<image class="gl-more iconfont" src="../../static/jinruS.png" mode=""></image>
								</view>
							</view>
						</view>
						<image class="gl-rule-img"
							src="https://static.biyao.com/mnew/img/master/togetherGroup/rule@2x_4b87758.png" mode="">
						</image>
					</view>

				</view>

				<!-- 2. è¯„ä»· -->
				<view class="evaluate">
					<view class="gl-comment-box aLinkJump">
						<view class="gl-comment-header">
							<view class="gl-comment-numbers">å•†å“è¯„ä»· (2579)</view>
							<view class="gl-comment-grades">
								<text>å¥½è¯„ç‡99.3%</text>
								<image src="../../static/jinruS.png" mode=""></image>
							</view>
						</view>
						<view class="gl-comment-box-warp">
							<view class="gl-comment-box-content">
								<view class="person-head flex">
									<view class="head-left flex">
										<view class="head-img">
											<image
												src="https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJMxEiccw5Ql165jbq2Uib2S61gyLgq6tyHLHmO0RVwWyb3GfgNNaQ1nujqsaYNKibnrb0sSfu1FRsicw/132"
												mode=""></image>
										</view>
										<text class="head-nickname escp">æ***è¶…</text>
										<text class="sprites-icon user-vp user-vp5"></text>
									</view>
									<view class="head-right flex">
										<text class="sprites-icon1 label-icon label-icon2"></text>
										<text>æ»¡æ„</text>
									</view>
								</view>
								<view class="gl-comment-time escp-double">2019.09.08 é¢œè‰²:é»‘è‰²|å°ºå¯¸:S</view>
								<view class="gl-comment-detail escp-double">è¡£æœæ‰‹æ„Ÿä¸é”™ï¼Œåˆèº«</view>
							</view>
						</view>
					</view>
				</view>

				<!-- 3. å•†å®¶åº—é“ºå±•ç¤ºåŒºåŸŸ -->
				<view class="gl-supplier-wrap section">
					<view class="supplier-info-wrap aLinkJump sectionS">
						<view class="supplier-info-left">
							<image :src="detailData.onSellGoodsInfo?detailData.onSellGoodsInfo.supplierImg:''" mode="">
							</image>
						</view>
						<view class="supplier-info-center">
							<view class="h2">{{detailData.supplierInfo?detailData.supplierInfo.supplierName:''}}</view>
							<view class="p" space="nbsp">
								å•†å“è´¨é‡:{{detailData.supplierInfo?detailData.supplierInfo.productQuality:''}} &nbsp; &nbsp;
								æœåŠ¡æ€åº¦: {{detailData.supplierInfo?detailData.supplierInfo.qualityGrade:''}}</view>
						</view>
						<view class="supplier-info-right">
							<text class="span">å…¨éƒ¨å•†å“
								{{detailData.onSellGoodsInfo?detailData.onSellGoodsInfo.onsellCount:''}}</text>
							<image class="iconfont" src="../../static/jinruS.png" mode=""></image>
						</view>
					</view>

					<!-- åº—é“ºç›¸å…³å•†å“ -->
					<view class="sipplier-img-wrap">
						<view class="commend-list ul">
							<view v-for="(item,index) in RelatedProducts" key="index" @click="goDetail(item)"
								class="aLinkJump li">
								<view class="commend-list-a a">
									<view class="recommend-pic">
										<image :src="item.imageUrl" mode=""></image>
									</view>
									<view class="recommend-tit inaline commend-list-tit">{{item.title}}</view>
									<view class="item-labels">
										<text style="background:;color:#FB4C81;border-color:#FB4C81">ä¸€èµ·æ‹¼</text>
									</view>
									<view class="item-price">
										<text class="i">ï¿¥</text>
										<text class="item-only-int span">{{item.price}}</text>
									</view>
								</view>
							</view>

						</view>
					</view>
				</view>

				<!-- 4. å•†å“è¯¦æƒ… -->
				<view class="pro-detail-warp">
					<view class="pro-detial-rule">
						<view class="pro-detial-top">
							<!-- heightAuto -->
							<view :class="[flag?'pro-detial-top-content':'pro-detial-top-content heightAuto']">
								<view class="">
									<view v-for="(item,index) in detailData.productTopDetail" key="index" class="dl">
										<view class="dt">{{item.name}}</view>
										<view class="dd">{{item.desc}}</view>
									</view>
								</view>
							</view>
							<view @click="spread" class="pro-detial-top-more">
								<text class="pro-top-more-text">{{spreadTxt}}</text>
								<image class="iconfont pro-top-more" src="../../static/xiajiantou.png" mode=""></image>
							</view>
						</view>
					</view>

					<view class="pro-detial">
						<view class="txq_container">
							<view class="txq_details">
								<rich-text :nodes="productDetails"></rich-text>
							</view>
						</view>
					</view>
				</view>
			</view>
			<!-- æ”¯ä»˜ã€å‚å›¢ -->
			<view class="gl-footer">
				<view class="gl-other-wrap">
					<view class="customer-service">
						<image src="../../static/zixun.png" mode=""></image>
						<text class="gl-service-text" id="liveServerBtn">å®¢æœ</text>
					</view>
				</view>
				<view class="choose-gl-btn">
					<view class="choose-bottom-btn-wrap">
						<view class="buy-shopcar group-buy-now eventLink li">
							å•ç‹¬è´­ä¹°ï¿¥{{detailData.suData?detailData.suData.price:''}}</view>
						<view class="buy-now group-buy open-group-buy eventLink fx-center li">
							æ–°äººå‚å›¢ï¿¥{{Number(detailData.togGroupPriceStr).toFixed(0)}}</view>
					</view>
				</view>
			</view>
		</view>

		<!-- åº•éƒ¨åè®® -->
		<view class="index-foot-xyword">
			<view class="xy-link-wrap">
				<text>ã€Šç”¨æˆ·æœåŠ¡åè®®ã€‹</text>
				|
				<text> ã€Šéšç§æ”¿ç­–ã€‹</text>
			</view>
			<view class="word-wrap">
				å¿…è¦å•†åŸæç¤ºæ‚¨ï¼Œäº§å“â€œç”±æŸåˆ¶é€ å•†å‡ºå“â€ä»…ä¸ºé™ˆè¿°åˆ¶é€ å•†æ—¢å¾€ç”Ÿäº§ç»å†ï¼Œå¹¶ä¸æ„å‘³ç€ç›¸åº”äº§å“ä¸ç‰¹å®šå“ç‰Œäº§å“ç›¸åŒæˆ–è¿‘ä¼¼ã€‚
			</view>
		</view>
	</view>



</template>

<script setup>
	import {
		getDetail
	} from '../../api/api.js';
	import {
		ref
	} from "vue";
	import {
		onLoad
	} from "@dcloudio/uni-app";

	let spreadTxt = ref('å±•å¼€å…¨éƒ¨'); // é»˜è®¤æ˜¾ç¤ºçš„æ–‡å­—
	let flag = ref(true); // æ§åˆ¶å•†å“è¯¦æƒ… å±•å¼€å…¨éƒ¨å’Œæ”¶èµ·åŠŸèƒ½
	let spread = () => {
		flag.value = !flag.value
		flag.value ? spreadTxt.value = 'å±•å¼€å…¨éƒ¨' : spreadTxt.value = 'æ”¶èµ·'
	}


	let detailData = ref([]);
	let groupTeam = ref([]); // æ‹¼å›¢ç©æ³•ä¸Šä¸‹è½®æ’­æ•°æ®
	let ServiceAgreement = ref([]); // æ‹¼å›¢ç©æ³•ä¸Šä¸‹è½®æ’­æ•°æ® recommendProducts
	let RelatedProducts = ref([]); // åº—é“ºå…¶ä»–å•†å“
	let productDetails = ref();
	let detail = async (options) => {
		// console.log(options);
		let x = (await getDetail({
			suId: options.Suid
		}))
		// console.log(x.data);
		detailData.value = x.data; // 
		groupTeam.value = x.data.recommendGroups.data.recommendGroup;
		ServiceAgreement.value = x.data.supplierInfo.policy;
		RelatedProducts.value = x.data.onSellGoodsInfo.recommendProducts;
		productDetails.value = x.data.productButtomDetail;
	}

	onLoad((options) => {
		detail(options)
	})

	let goDetail = (Suid) => {
		uni.navigateTo({
			url: '/pages/detail/detail?Suid=' + Suid.suId
		})
	}
</script>

<style scoped>
	@import url('../../assets/detail.css');
</style>